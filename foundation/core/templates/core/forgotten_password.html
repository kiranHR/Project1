{% extends "core/base.html" %}
{% load i18n %}
{% load staticfiles %}

{% block page_title %}
<title>Ikwen | {% trans "Forgotten password" %} </title>
{% endblock %}

{% block head_style %}
    {{ block.super }}
    <style type="text/css">
        #top-bar .menu {display: none}
        #forgotten-pwd {margin: 30px auto; width: 305px}
        #forgotten-pwd input {font-size: 18px; margin-left: 4px; width: 305px}
        .directions {font-size: 16px; margin-top: 90px; text-align: center}
        div.success, div.failure {margin: 60px 0 15px; padding: 10px}
    </style>
{% endblock %}

{% block content %}
    <div id="content" >
        <div class='wrapper' style="margin: 120px auto 240px">
            {% if request.GET.successfulReset %}
                <div class="success">
                    {% trans "Your password was successfully reset and sent to your e-mail." %}
                </div>
                <a href="{% url 'index' %}"> {% trans "Home" %} </a>
            {% else %}
                {% if request.GET.emailSendFailed %}
                    <div class="failure">
                        {% trans "An unknown error occured while sending e-mail. Please try again later" %}
                    </div>
                    <a href="{% url 'index' %}"> {% trans "Home" %} </a>
                {% elif request.GET.emailNotFound %}
                    <div class="failure"> {% trans "E-mail non trouvé; veuillez vérifier SVP" %}.</div>
                {% elif request.GET.mismatch %}
                    <div class="failure"> {% trans "L'utilisateur et l'e-mail ne concordent pas; veuillez vérifier SVP" %}.</div>
                {% endif %}
                <div class="directions">
                    {% trans "Veuillez remplir votre compte et l'adresse e-mail; votre nouveau mot de passe vous y sera envoyé" %}.
                </div>
                <form id="forgotten-pwd" method="post" action="{% url 'ikwen:forgotten_password' %}"> {% csrf_token %}
                    <div>
                        <input type="text" id="id_username" name="username" placeholder="Phone ou Login"/>
                        {{ form.username.errors }}
                    </div>
                    <div>
                        <input type="text" id="id_email" name="email" placeholder="E-mail"/>
                        {{ form.email.errors }}
                    </div>
{#                        <div>#}
{#                            {{ form.captcha }}#}
{#                            {{ form.captcha.errors }}#}
{#                        </div>#}
                    <div style="text-align: center; width: 100%">
                        <button type="submit" class='confirm' style='float: none; margin-top:10px'>
                            {% trans "Reset password" %}
                        </button>
                    </div>
                </form>
            {% endif %}
            <div class="clear"></div>
        </div>
    </div>
{% endblock %}
{% block custom_js %}
    {% include 'core/snippets/google_analytics.html' %}
{% endblock %}