{% extends "core/base_bs.html" %}
{% load i18n staticfiles %}

{% block page_title %}
<title>{{ service.project_name }} - {% trans "Forgotten password" %} </title>
{% endblock %}

{% block head_style %}
    {{ block.super }}
    <style type="text/css">
        #navbar .search, #navbar .navbar-right {display: none}
        #content {padding-top: 80px; margin-top: 5%}
        #content > div {margin: auto}
        div#forgotten-pwd {width: 360px}
        div#forgotten-pwd form {border: 2px solid #dce4ec; border-radius: 4px; margin-top: 60px; padding: 30px}
        @media (max-width: 768px) {
            #content {margin-top: 120px}
            #content div#forgotten-pwd {margin: auto; width: 96%}
        }
        .directions {font-size: 16px; margin-top: 90px; text-align: center}
        div.success, div.failure {margin: 60px 0 15px; padding: 10px}
    </style>
{% endblock %}

{% block content %}
    <div id="content" class="container">
        {% if request.GET.success %}
            <div class="success">
                {% trans "Instructions to reset you password were sent to your e-mail." %}
            </div>
            <a href="{% url 'home' %}"> {% trans "Home" %} </a>
        {% else %}
            {% if request.GET.emailSendFailed %}
                <div class="failure">
                    {% trans "An unknown error occured while sending e-mail. Please try again later" %}
                </div>
                <a href="{% url 'index' %}"> {% trans "Home" %} </a>
            {% elif request.GET.notFound %}
                <div class="failure"> {% trans "E-mail non trouvé; veuillez vérifier SVP" %}.</div>
            {% endif %}
            <div class="directions">
                {% trans "Please provide your email to receive password reset information." %}.
                {# TODO: Allow people to retrieve password with phone number as well #}
            </div>
            <div id="forgotten-pwd">
                <form method="post" action="{% url 'ikwen:forgotten_password' %}"> {% csrf_token %}
                    <div class="form-group">
                        <label for="lg-username">Email</label>
                        <input id="lg-username" class="form-control input-sm username" type="text" name="email" />
                        {{ form.username.errors }}
                    </div>
                    <div class="form-group">
                        <button class="btn btn-primary btn-block btn-sm"> {% trans "Reset password" %} </button>
                    </div>
                </form>
            </div>
        {% endif %}
    </div>
{% endblock %}
{% block custom_js %}
    {% include 'core/snippets/google_analytics.html' %}
{% endblock %}